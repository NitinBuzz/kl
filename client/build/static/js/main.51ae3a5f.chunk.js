(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{41:function(e,t,n){e.exports=n(94)},71:function(e,t){},92:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),l=n(14),r=n.n(l),c=n(2),o=n(3),i=n(5),m=n(4),u=n(6),d=n(21),h=n.n(d),p=n(40),f=n.n(p),v=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleClick=function(e){n.props.selectChannel(e)},n.renderChannelList=function(){return n.state.channels.map(function(e){return s.a.createElement("div",{key:e,className:"channel-name",onClick:function(t){return n.handleClick(e)}},s.a.createElement("span",{className:"channel-hash"},"#"),s.a.createElement("span",{className:"channel-text"},e))})},n.renderChannels=function(){return n.props.render?s.a.createElement("div",{className:"channelList"},s.a.createElement("div",{className:"channels-head"},"Channels"),n.renderChannelList()):s.a.createElement(s.a.Fragment,null)},n.state={channels:["GENERAL","FED","CL","TRANSPORT","CONVO `19"]},n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return s.a.createElement("div",null,this.renderChannels())}}]),t}(a.Component),g=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleUpdate=function(e){n.setState({msg:e.toString().trim()})},n.renderSend=function(){return n.props.render?s.a.createElement("div",{className:"form"},s.a.createElement("div",{className:"hrx"}),s.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n.state.msg.trim().length>1?(n.props.sendMessage(n.state.msg),n.setState({msg:""})):n.setState({msg:""})}},s.a.createElement("input",{className:"message-input",type:"text",required:!0,placeholder:"Message",value:n.state.msg,minLength:2,onChange:function(e){n.handleUpdate(e.target.value)}}))):s.a.createElement(s.a.Fragment,null)},n.state={msg:""},n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return s.a.createElement("div",{className:""},this.renderSend())}}]),t}(a.Component),E=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(m.a)(t).call(this,e))).renderLive=function(){return n.props.render?n.props.messages.map(function(e){var t=e.from,n=e.msg;return s.a.createElement("div",null,s.a.createElement("div",{key:t+n,className:"message"},s.a.createElement("span",{className:"message-from"},t,":")," ",s.a.createElement("p",{className:"message-text"},n)),s.a.createElement("div",{className:"hrx-xs"}))}):s.a.createElement(s.a.Fragment,null)},n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.scrollToBottom()}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"scrollToBottom",value:function(){var e=r.a.findDOMNode(this.messagesContainer);e.scrollTop=e.scrollHeight}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"liveContainer"},s.a.createElement("div",{ref:function(t){e.messagesContainer=t},className:"live-chatbox"},this.renderLive()),s.a.createElement(g,{render:this.props.render,sendMessage:this.props.sendMessage}))}}]),t}(a.Component),N={},b=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(m.a)(t).call(this,e))).initClientJoin=function(){N.on("newMessage",function(e){n.updateLive(e)}),N.emit("join",{name:n.state.name,room:n.state.channel}),f.a.post("/getRecords",{room:n.state.channel}).then(function(e){n.setState({messages:e.data})})},n.selectChannel=function(e){n.state.channel!==e&&n.setState({oldChannel:n.state.channel},function(){n.setState({channel:e},function(){n.initClientJoin()})})},n.sendMessage=function(e){console.log(e),N.emit("createMessage",{room:n.state.channel,from:n.state.name,msg:e})},n.updateLive=function(e){var t=n.state.messages;t.push(e),n.setState({messages:t})},n.closeModal=function(){n.setState({showModel:!1,name:""})},n.renderModal=function(){return s.a.createElement("div",{className:"modal"},s.a.createElement("div",{className:"modal-content"},s.a.createElement("span",{className:"close",onClick:function(){n.closeModal()}},"\xd7"),s.a.createElement("p",null,"Provide Your Name"),s.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n.state.name.length>3&&(localStorage.setItem("x-name",n.state.name),n.closeModal(),n.setState({shouldRender:!0,name:localStorage.getItem("x-name")},function(){n.initClientJoin()}))}},"Name:",s.a.createElement("br",null),s.a.createElement("input",{type:"text",name:"name",minLength:4,required:!0,onChange:function(e){n.setState({name:e.target.value.trim()})},autocomplete:"off",value:n.state.name}),s.a.createElement("br",null)," ",s.a.createElement("br",null),s.a.createElement("input",{className:"button",type:"submit",value:"Submit"}))))},n.state={channel:"GENERAL",oldChannel:"",messages:[],shouldRender:!1,name:"",showModel:!1},n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;N=h()(this.props.endpoint),localStorage.getItem("x-name")?this.setState({name:localStorage.getItem("x-name")},function(){e.setState({shouldRender:!0},function(){e.initClientJoin()})}):this.setState({showModel:!0})}},{key:"componentWillUnmount",value:function(){N&&N.emit&&N.emit("disconnect")}},{key:"render",value:function(){return s.a.createElement("div",{className:""},this.state.showModel&&this.renderModal(),s.a.createElement("div",{className:"chatterContainer"},s.a.createElement(v,{render:this.state.shouldRender,selectChannel:this.selectChannel}),s.a.createElement(E,{render:this.state.shouldRender,messages:this.state.messages,channel:this.state.channel,updateLive:this.updateLive,sendMessage:this.sendMessage})))}}]),t}(a.Component);n(92);var C=document.getElementById("root");r.a.render(s.a.createElement(function(){return s.a.createElement("div",{className:"main"},s.a.createElement("p",{className:"top-text"},"This is KLU World Wide Chat App."),s.a.createElement("p",{className:"top-right-text"},"No Spam || Save important data, chat will be flushed soon."),s.a.createElement("div",{className:"AppTitle"},s.a.createElement("h2",{className:"index-title"},"I'm Mr. KLU World Wide")),s.a.createElement("div",null,s.a.createElement(b,{endpoint:"http://142.93.215.49:5000"})))},null),C)}},[[41,2,1]]]);
//# sourceMappingURL=main.51ae3a5f.chunk.js.map